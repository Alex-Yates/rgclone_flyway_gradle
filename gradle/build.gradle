task helloWorld {
    doLast {
        def githubSecret = project.property('githubSecret')
        println "GitHub Secret: $githubSecret"
        println 'Hello, World!'
    }
}

task setupRgCloneCli {
    doLast {
        def rgCloneEndpoint = project.property('rgCloneEndpoint')
        def rgCloneToken = project.property('rgCloneToken')
        curl $rgCloneEndpoint/cloning-api/download/cli/linux-amd64 | tar xz
        export RGCLONE_API_ENDPOINT=$rgCloneEndpoint
        rgclone auth -t "$rgCloneToken"

        exec {
            commandLine "curl $rgCloneEndpoint/cloning-api/download/cli/linux-amd64 | tar xz"
        }
        
        exec {
            commandLine "export RGCLONE_API_ENDPOINT=$rgCloneEndpoint"
        }
        
        exec {
            commandLine " rgclone auth -t $rgCloneToken"
        }
    }
}