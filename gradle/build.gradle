task helloWorld {
    doLast {
        def githubSecret = project.property('githubSecret')
        println "GitHub Secret: $githubSecret"
        println 'Hello, World!'
    }
}

task setupRgCloneCli {
    doLast {
        def rgCloneEndpoint = project.property('rgCloneEndpoint')
        def rgCloneToken = project.property('rgCloneToken')

        exec {
            commandLine 'curl', '-o', 'rgclone.tar.gz', "$rgCloneEndpoint/cloning-api/download/cli/linux-amd64"
        }

        exec {
            commandLine 'tar', 'xz', '-f', 'rgclone.tar.gz'
        }

        //exec {
        //    commandLine 'chmod', '+x', 'rgclone'
        //}

        project.ext.RGCLONE_API_ENDPOINT = rgCloneEndpoint

        exec {
            workingDir '.' // Set the working directory to the current directory
            commandLine './rgclone', 'auth', '-t', rgCloneToken
        }
    }
}